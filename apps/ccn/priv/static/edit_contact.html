<!DOCTYPE html>
<html>
<head>
    <title>Edit Contact</title>
</head>
<body>
    <h1>Edit Contact</h1>
    <form action="/edit_contact" method="post">
        <input type="hidden" name="_id" value="{{contact_id}}">
        <input type="hidden" name="company_id" value="{{company_id}}">
        <input type="hidden" name="_rev" value="{{contact_rev}}">
        
        <label for="first_name">First Name:</label><br>
        <input type="text" id="first_name" name="first_name" value="{{first_name}}" required><br><br>
        
        <label for="last_name">Last Name:</label><br>
        <input type="text" id="last_name" name="last_name" value="{{last_name}}" required><br><br>
        
        <label for="title">Title:</label><br>
        <input type="text" id="title" name="title" value="{{title}}"><br><br>
        
        <label for="type">Type:</label><br>
        <input type="text" id="type" name="type" value="{{type}}"><br><br>
        
        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email" value="{{email}}" required><br><br>
        
        <label for="phone_number">Phone Number:</label><br>
        <input type="tel" id="phone_number" name="phone_number" value="{{phone_number}}"><br><br>
        
        <label for="mobile_number">Mobile Number:</label><br>
        <input type="tel" id="mobile_number" name="mobile_number" value="{{mobile_number}}"><br><br>
        
        <h3>Branch Address</h3>
        <label for="street1">Street 1:</label><br>
        <input type="text" id="street1" name="branch[0][street1]" value="{{branch.street1}}"><br><br>
        
        <label for="street2">Street 2:</label><br>
        <input type="text" id="street2" name="branch[0][street2]" value="{{branch.street2}}"><br><br>
        
        <label for="suburb">Suburb:</label><br>
        <input type="text" id="suburb" name="branch[0][suburb]" value="{{branch.suburb}}"><br><br>
        
        <label for="state">State:</label><br>
        <input type="text" id="state" name="branch[0][state]" value="{{branch.state}}"><br><br>
        
        <label for="post_code">Post Code:</label><br>
        <input type="text" id="post_code" name="branch[0][post_code]" value="{{branch.post_code}}"><br><br>
        
        <label for="country">Country:</label><br>
        <input type="text" id="country" name="branch[0][country]" value="{{branch.country}}"><br><br>
        
        <label for="note">Note:</label><br>
        <textarea id="note" name="note">{{note}}</textarea><br><br>
        
        <label for="status">Status:</label><br>
        <select id="status" name="status">
            <option value="active" {{#if (eq status "active")}}selected{{/if}}>Active</option>
            <option value="inactive" {{#if (eq status "inactive")}}selected{{/if}}>Inactive</option>
            <!-- Add more options as needed -->
        </select><br><br>
        
        <h3>Advised Roles</h3>
        <!-- Repeatable section can be handled with JavaScript for multiple roles -->
        {{#each advised_roles}}
        <div>
            <label for="role">Role:</label><br>
            <input type="text" id="role" name="advised_roles[{{@index}}][role]" value="{{role}}"><br><br>
            
            <label for="date_collected">Date Collected:</label><br>
            <input type="date" id="date_collected" name="advised_roles[{{@index}}][date_collected]" value="{{date_collected}}"><br><br>
            
            <label for="perm_casual">Permanent/Casual:</label><br>
            <select id="perm_casual" name="advised_roles[{{@index}}][perm_casual]">
                <option value="permanent" {{#if (eq perm_casual "permanent")}}selected{{/if}}>Permanent</option>
                <option value="casual" {{#if (eq perm_casual "casual")}}selected{{/if}}>Casual</option>
            </select><br><br>
        </div>
        {{/each}}
        
        <h3>Deal Information</h3>
        {{#each deal}}
        <div>
            <label for="deal_role">Role:</label><br>
            <input type="text" id="deal_role" name="deal[{{@index}}][role]" value="{{role}}"><br><br>
            
            <label for="amount">Amount:</label><br>
            <input type="number" id="amount" name="deal[{{@index}}][amount]" step="0.01" value="{{amount}}"><br><br>
            
            <label for="close_date">Close Date:</label><br>
            <input type="date" id="close_date" name="deal[{{@index}}][close_date]" value="{{close_date}}"><br><br>
            
            <label for="deal_status">Status:</label><br>
            <select id="deal_status" name="deal[{{@index}}][status]">
                <option value="open" {{#if (eq status "open")}}selected{{/if}}>Open</option>
                <option value="closed" {{#if (eq status "closed")}}selected{{/if}}>Closed</option>
                <!-- Add more options as needed -->
            </select><br><br>
        </div>
        {{/each}}
        
        <label for="follow_up">Follow Up Date:</label><br>
        <input type="date" id="follow_up" name="follow_up" value="{{follow_up}}"><br><br>
        
        <input type="submit" value="Update Contact">
    </form>
</body>
</html>
